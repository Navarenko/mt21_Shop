<?php 
define("LESHA", "APA91bH7SDsDjJyleWv6IH-ZVQyKXwGrWbY9rJXcbi0FOL22ZfaIPCj0ruBhVQJkWS7zLKxtYN7VLo8crwBwVmnIb-iFq9YamwWfN8oKoYQfo-lWuzJa2fs");
define("MARY", "APA91bFtjpAX5602W2h16j9fdRSDl8id21goFmgyf24SVnmmdmhCY-UsVlH4iAmH3kPojen1Vk1kndMdst2ULdG_iusKhW_5NZTHWd3hulXHFOtdTgnOzQQ");
define("IVAN", "APA91bEKNdRBLzFWMLrNK3z0AJaJ74qULd4P12hzY6Q6to6OQrNEDB8zWuITU0mC01o0H02u_sLBJkpq66qkGStZ84La_liUZCM6BtgsNueuhqC6H4cB81E");
define("IVAN2", "APA91bFZrN25zZAky2wHaZG02EBv3tKX7ve5XWj08KccKlHbVIften4KPtJwXGYgKIYvvUs8DO-1atAsUf_Ud8psS8WxgDRwkam4c004w_nEbX7POe_f94");
define("NIKITA", "62dd78d5 678b5b7c daa88d77 8457425e 670de85d 89ad9285 5b4920e5 e4aaf058");
define("NAMIR", "APA91bFYYiI2b4iV9axlCYNFY7fKGXt0fhw0DRLvFuaWggF8PiTYB1u4vMgqFKnAT2e5j0rxlmJ-9b6ZobiXMnCskoVvDxLNfasOs_34k8NRSUac_QYXzK8");

$alltokens = "APA91bG6pM6_IYm1fqSZWxT2WeIsHlOHJcfdq20h6hTRY8rR1pKQR9F5cymDPokVogcLJmPgH2DFv3kLoLfMrMONKGQyH9m6wKmdqYX8H66YCpH_YYHn_b4,APA91bGa3tgf71SjtLEcSOwdrJig2_pCxWjEDchDSjQKmZChgMYVq15mrI5-nWekVMpSwnnNDxWB_TphCFJwdMxwSoMCso_rM80coSD6G0-qBL--WyFPbMk,APA91bGB3GfxAdgTHpOT_eLNchg6kJUXSFtjY1AddXhccRgV41PsFYe3Z9FprHrvSFjYxMOHAAK7b4IPxQDLalTlYOvlbB0C_FkJpzY-b3Uuu5A5bHXRMy4,APA91bGCdsLYhK25GAlTRF0ZZznPZkZ7mQZdX-J6kOkhy7mQ4rxp0EWb6PFTZKS6_x3cRpwrCqoEX0QQYR_jraW45_A6BPtPwJWtOZJrZxlveG7LBNbwSRw,APA91bGdhKd8I7Lh0g1_vo6yPmU9a2A8MdPcMdimOCgnomOxyfJXjYH-fh9DckFSCYI983vKOeN-CjZBKhK4_fiX5vm7k0WfZJi4_bzNwv6mrnAJ8KvRsFQ,APA91bGDTRCggElNVnb-jd5AE-qYmqOH16bsEn6XqT-zztbP5C8t4mXnkiqKmTDyeOxPkhD8ZQIwCWGepxP--uvlx1LDrbssc0afvVzOza2h5JjFyDDaiNY,APA91bGdTZLt2nzqbxi9Kgvl8-rSfUY06Qo5NM-edxSf9OlxjQk632ILA95eAwLR_iDDK_DpBNjKBoyS8N_I9yCdaiUt7-Q3qL_fTkrUUO0-aTT0L5bKQu8,APA91bGDYwUXxfvkrBFvCRdJExCHTXIg1bziqjknIJ8UpzVPoRCyCpH5aDUMzqms6iiq_4b81daz-pQdV_inoOgKqTIwKFoqKHmcdk-zb2PD350j0gXHs7c,APA91bGE4GJNap1-qv5qGrL5ZNXYfdyjMihpCdubXorEZU6GSEIbbZNQT2jEPj5DW8FgtlE9-R6y15SatoMmpUoa-RBbuBHXZKM4z3Ry_qFuG0aGNdOUC8k,APA91bGEypi7B9k3_SsNl6KfhTa2ptB7D3GqTfU7inuEm8oB_cD7qtl50YpDEQ4pRkVCXEQ-llYu44RjiYizTSJSdl0n9voEo8MybIa5r1bQ_VL3ZXaKvuU,APA91bGfAQxN0aZMNFc-So1T2lQaLtZZaRsMESJT4onmE9aWOkzlhHQvGkdJ3WJuFeouZFXQxFVmJoJ8cIxdJhNKOmZDs4hPhUEVouRvd_3VmZKwesSA2EE,APA91bGfGL041GhCKmBOnl4a_1I7WnsZS0Ifk_G5MD4VrcWSJJzaeQ8i4-jlwVrrn8kLIWoJBIGjwkLrtxEST8_znDCgaj-OWhf8qSklDKaqnfjK5wXPWfw,APA91bGFgtP4XJMqcKPoaMCtjApkyhuhiAoFXuQrmyZ4hYQI_jz-jdCzUsfjnV9yQGhkLM-TgtVUSK2luK9fmDKRDyFohfC1PmUecmWykgE05_Rw7phgTGk,APA91bGgSpfUjOdSqV9OJvAobcVEtdLoH3EXxW5b8ekLb1-TEykobU8KvM8g8J4Hb7ENO8gO7UW_5uTa6YxHE5MI1kcL7nR7NMi9I8ATloP0hAJYft206Hs,APA91bG-gvrp6SE26jMHh9dBRJMQ_EosStuw2sSPVOA4AFRkF05b1m4rZd0t89GQUXhaCUbnCsVpwpFS9EyH1_hEAj0htCUwSwyZJgDVkQnSfQ1IHa6yxyQ,APA91bGH18E-ZOxsWMprXqsVkM5oGVjDzlRWE-zlDBcUoKKVfrtchpLFJ5vR6lDd-SHojYYKQJMs8xnZi6RK1PGD6n4gMJdmyrh4bhVmGiBOn7B-q7j0pxc,APA91bGH5zEru6g__VKaS3cE0qDTkHfz5ZdyAL0zz7Pes3KmX0soeik9gBWNPBfwAgBUeEIUq1LXzNbm4qjT4RuL0vEEs_C3UL9TSLXV85nMeL4cidd8yhI,APA91bG-HqGh27U8MEjQsIZP_ZE-fCZRxPzOawF5TrrPYbb-OGuGWN9N5McRUJtIm2UsarXo3Qe6fX395JADZFPbpBJd18tZXlgcj3_iriG_2c5HY9Ar-cU,APA91bGIb_Ta2C23hVYjYgdKGgvuejPIvJ0LeSRMP_aOyNNA6LQf_p6iWQzRBewzRp-47PkJhcpBVF_UXsLjsJp0n-Ohe11SMre09lmAjviRaJmK--w0Gmc,APA91bGijPpxf27lOQoE5HjNQoGalMIVqydMXsz9X-e5IvZm8bNjTHYl0ArfVwqfIxYZkK3NsnWZurQs-7CqDcs1THvAftGGYnAWrOz_CqoX0fU2D3CQexA,APA91bGJ_p3jOCJ5kzB6-ChcQM8vFJCtJHMrWURz2Jr3RAJO8g7ip479TAcDglfB4v3yoGZDEiu1_ozhg0HSlTfksPaPptIVs_QIgFfC8B1Jrj-gWMxrTJs,APA91bGJ5vG4an632EoTZYoCklSjp-Z3x4m32b24RBzJ5g7mM3u67db_MyisMVf5MeC5fbTpBTBBWrQXF5rlzYlF-SOfXv4Oth42Q-KdK7H99z-5f_VzOyQ,APA91bGjkkPyzVsfDn6plY5DyHOHz5aGXtM-TUi5XCjZHFG6c-ljwuWDifjBLOgVJYZpYbVSKal-sxqyHaOoIEV13ElnkrUafHbzj0YQvWyJJJaBoOj2jbI,APA91bG-jzHEbPIz3IktRFvSt0lH1eXtmVpDaFuni-_5UwM5A62MDivZuzG80MhkHs3tlGWdDfRRSfPxf8f5csc5mMr0-S7H5DPkXt7esTKiBrTo_yjKvUk,APA91bGkTDRXU7QRzmC14OkSEuTCxnFAUBqDnmvEOWMCOqPRAwWA1SFr0RGOiNLxtgPzetf0krLz3FuYC-cncOgL670AzBrhQ0YOVjjwYMhcspyvdT-vVw0,APA91bGLfaa3UmYhKzyC64abGIkGffWcE4wiYIeAmzPkCIxdpOR7i4QiEZwjdAE5YVG7t8ndyyvqmANxMvPm1P41sTtu4EP-g5oG4QCTz2ciJWyWbYpThXQ,APA91bG-LJ9F_tABg6z46-3w6SXMxxUW6qu2pCsROB-WsCAio32lB_Spb8w0pAJZbL-IAs3_M1KepDtUuJeqZhXgWYpArKDksCcEssapA6lSKXMOIORvQik,APA91bGLYKMUV8NXzYvWmaSDlyXv4C-exZBmrpzzNEhNsi7OI81A2WPqIZI1wM2QxkRonWqrIfgNmPXi9nYNbMSQF1kz96aUc8R2m95KYLqqBz3fwVbRfbU,APA91bGmGYy6mjmk3iNGVUfvwpv4hb9NtzJHI5iwOHabbqqV9EInr9sVPZmB-3gC5FvhkXmxTz8DyYMz1sOPWjTs1Rhayuph29egaYG4aqibheeQpJQv4AU,APA91bGnI71KGXyYkxZdOpbGmYQ6kmnjgH7KCRSaXCcKPnKIiBF_qIWWqlRY_Ec_eRUeTyFQaoJll5kYVwxWvWs9OSxY9QdXMhSASZFAmf6kjAHGUnlDNPw,APA91bGNNVjxStBgy9B0saPdtgbGoRKBFYyd64IHJoGgLDBzz5CwaOjTseTX9ob4TGnnKtRkNQKHG6edgEAB4Y6YyrcnpD8gH7_TGQ0tj9HgQ0OclQ6d1R8,APA91bGPlgu31PpRazWqS1Xn1yt4E0Klt5bry-zOgpG3CquvP7Bb3e4ErN3EdQvxEqDeKmLPpXygYyO8yUKYGJWBrVVkjdAJjD21Yv_KyaCZ8SVgy9vWJWw,APA91bGQbO1lnT3KFLjGWyS5cyy4pnW3cw9vQifCcBt_gUwGss0cNqAh9t7qW69EqC6uXTnAES8nSgBoiJ-_QZ4KPPj4dSNBhWrUb4ZNuYqlaJcaHrGVFNc,APA91bGqfHQnU6XPBgk_YCqAGhg3owqeSqvlOeTErRv5r9aX5pQH6VkQY4xWoJESdqtbbYpWI464x8jOcWXCMGoEwCz_uO_yfXxX0rqXFDPT8GDruDy64wc,APA91bGQQaKRtoyZm8kOwpEgOZkqUoGlYJZg4Gt4dXKBzoF6SCmGPgOK2WmIUECQccNOPMdeJBBB3Fqb3k8o6yBbJrIa92Awot6kkAbcdD-IwA4BMy0z2NU,APA91bGrCCXrbxz9XbXTfD7kPBS-5xZrJ1OD20GVrzWItQkyMtaGAdioLB_CcuoeDaBhDafsvncABIJFllcnkxGlqMsqvbkCBDkfw8A096MnZT4oQUuvcYM,APA91bGrHN0YBcE36dVBhdqPsORBOYFRD3awE3uwtRLHTCt5_tFrgHC-osi5r3thaJXG-mjhtv0tDLMXD14EeH1BZfTFcKP3s0uX4NGCbTVAWukU3Afq-NE,APA91bGRVZKb6HNj_I8yP9_V6KPnwvSBt_82siOCbzyFoy0VwQTd18caZIlAebGR53A6XSqqEnvVANcmIW2W_OFQg2F858UX936iCNYsCFHVU1ryPjjsYT8,APA91bGrX0uqt661RpTvNdpwiPLMbMTO6uJl62nipTwN-MXaIhU6mdvyzBjzXiwrR5z-WqizF27nbwCsV3jbbo0R22LTQrNa9VAJVcbvsl7P1Riv5SoA9hw,APA91bGSCCVTL8LYvEuYJFPwYV2UmhxbHoXW2ly34PesjJxDNaEpweMK2uXw0ZxB9QbpA7TRCxkIdRQ7AgSMS5asmX4gP5Tf4zY5MAF9sQ7PNuRgLPiEOZQ,APA91bGsisI8JaKGZL-BnAZRu__3RBthBCnq6ImXNTMT76R7Vr75mc8c7cbrhJp7cfQlSDJKCLWH7Kr8DtBczgBotufXRzztWbtrOFLeO9lEOSwJmWwJz2E,APA91bGSUUJ3xcomPgeF1G8Vf2fGUgoE-2reSqdESGWQ_-ogo6S9b0Y0XFcckmKoqkGT7wIPC4lMWrCpXq-zREYc2gyL5Ft_FFKS9A25B2jMyAAcFxI43OY,APA91bGT1dE9GumyhLaAgMOw7_H34K2CTk2LNAmdVpVUJQ7ZHGmw2s4EpUCU8XwTa3VrSBB-uhUbcpOAObkY7MslIe3peORuHjxuWGgJCsl857BIHeaNYY0,APA91bGVF2Z_7IebvnVWJSLgCF2mQWnN-tKYFZFidsUO6z44tDHtDz_bei0A0Idb-hNow4RJ4U8kIrq_f1ZZ4TmqYTFqOjLcK8qmqtQq5HM9PN0lLqSES7Y,APA91bGvkL0RziZO-KQSatV2_-1VdswA4wGzbdtB97QP5uZOrMdj8DyPkHcsnh2y3T1L23nBkwHBZ1eKywhWjnRt_10fAmQChUv4Dlo_AOl7TdFDXUNHl40,APA91bGVMwBhe0ddjceN8X3yvhtzMR6qwprfub4-nC79YGQYEwFWvbPPs-pbba2BkZjBwmQ4cUfrTnS5pmvwJ7frYmDjjvdi1hoAxYGxMIfdX4c7Zq3d6ac,APA91bGw4_aPosXBzrSYbGCD7Otl9G7qpUuoeSjMRWuXYwutiSQDq4H5Io-_Pv49mi9zDQI8xLDFeXO85b9rY4Iau3tYnsRzsX0ybfhRKRP5C20uhRlWv2U,APA91bGWNoOFyi4CepWCColLsckZFTsa4VrMtVwAyozU0MwWV3hoFyKJgHkCy-1uK8WLu0vRQkNP7cCTc6baU66Bev_h89mEkB07qAsBab7MLn8qNM0geTE,APA91bGwvR7dQAHdQkNQkJEKcQyN7OTfyVsrbCZwUojLM-dHGA8MO59Tk3c7hFTh8-qiLTe04xvCDlRM3xiPy_q39sVItVxhey9M4W4yfM6BVY_ZVOGEaTw,APA91bGZJKcFqgjqLPEkIRBAfd6fPtVOfFOHAOiF6s1lk3FcmJGBt-Lfszkzh8NKl770-aheZduQeE5SXGNB6ld7ymRYQ_KKDn37_CxS69_kY8FQ78YAgT8,APA91bH_9GJ3eJXETRYrn5e7fNEw6Bw5_6tYGsnV9zAOIwkVfu71NbMuoODcnefmQ_DBldrH6C8cYWYUN_neI18jIQvyHL-Dd52RY6yAWN5qwxvxJqLVSFY,APA91bH11qknqkrvk8TxyZdREq9vyUsr_6hPpS0W1hzYIgFxfDc8fwDxq8IulumnkR5LP91up0IVqRfz_9Zegr9vvnHVYWHmZR2SesWOW9GmDnIU-Ez5N2Y,APA91bH3gMu8aTYbolg_gprMX8cwK_nB-2p8VMiwABogUD9-uZ_fkSsuVTAAFW25AZ54GQcQiUv9GJcqrZOej71Kapz-tarUpzOSiWuKlu7gnoRoQUUS1Js,APA91bH46Z-e3PYcIjHRG12A7lM5v_csTzbzNAnQDv7_LXdwF_0_HA2xAmxMLpE4eflsgh1I6KjX58SHnpoIyWK6MH245ZqUHX81-2Ngi6L57nKVrxqHbYc,APA91bH5pdx97oaOJxPREvHsJaJ69LQV7QNhRzTeMeyttrz7CAtPg0Ek5mqVUWhqOFG7PJX3K_9c5chlxgvc2_-sFy8p9CewVkO46RX2iqQ_jjO_Z7iqQB0"; /* получатели через запятую. Например $tokens = LESHA.','.MARY; */

include 'push_data.php';
include 'checkPushDay.php';
$arrtokens = explode(",", $alltokens);
$countArrTokens = count($arrtokens);

if (checkPushDay($date, $weekday, $mounth, $year, $pending)) {
	$i = 0;
	$ch = array();
	$mh = curl_multi_init(); //создаем набор дескрипторов cURL
	while ($i < $countArrTokens) {
		$ch[$i] = curl_init(); // создаем ресурс cURL
		// устанавливаем URL и другие соответствующие опции
		curl_setopt($ch[$i], CURLOPT_URL, 'https://mt21.ru/shop/index.php?route=mshpo/ajax/push&ACTION=addPush&tokens='.$arrtokens[$i].'&push='.$push_text.'&'.$push_method.'='.$push_pageId);
		curl_setopt($ch[$i], CURLOPT_HEADER, 0);
		curl_multi_add_handle($mh,$ch[$i++]); //добавляем дескриптор
	}

	$active = null;
	//запускаем дескрипторы
	do {
		$mrc = curl_multi_exec($mh, $active);
	} while ($mrc == CURLM_CALL_MULTI_PERFORM);

	while ($active && $mrc == CURLM_OK) {
		if (curl_multi_select($mh) != -1) {
			do {
				$mrc = curl_multi_exec($mh, $active);
			} while ($mrc == CURLM_CALL_MULTI_PERFORM);
		}
	}

	$i = 0;
	while ($i < $countArrTokens) {
		//закрываем дескрипторы
		curl_multi_remove_handle($mh, $ch[$i++]);
	}
	curl_multi_close($mh);

/*  ОБРАЗЕЦ:

	// создаем оба ресурса cURL
	$ch1 = curl_init();
	$ch2 = curl_init();

// устанавливаем URL и другие соответствующие опции
	curl_setopt($ch1, CURLOPT_URL, "https://mt21.ru/shop/index.php?route=mshpo/ajax/push&ACTION=addPush&tokens=APA91bH7SDsDjJyleWv6IH-ZVQyKXwGrWbY9rJXcbi0FOL22ZfaIPCj0ruBhVQJkWS7zLKxtYN7VLo8crwBwVmnIb-iFq9YamwWfN8oKoYQfo-lWuzJa2fs&push=%D0%94%D0%B5%D0%BD%D1%8C%20%D0%92%D0%B5%D0%BB%D0%B8%D0%BA%D0%BE%D0%B9%20%D0%9E%D0%BA%D1%82%D1%8F%D0%B1%D1%80%D1%8C%D1%81%D0%BA%D0%BE%D0%B9%20%D1%81%D0%BE%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D1%81%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9%20%D1%80%D0%B5%D0%B2%D0%BE%D0%BB%D1%8E%D1%86%D0%B8%D0%B8&news=16");
	curl_setopt($ch1, CURLOPT_HEADER, 0);
	curl_setopt($ch2, CURLOPT_URL, "https://mt21.ru/shop/index.php?route=mshpo/ajax/push&ACTION=addPush&tokens=APA91bFtjpAX5602W2h16j9fdRSDl8id21goFmgyf24SVnmmdmhCY-UsVlH4iAmH3kPojen1Vk1kndMdst2ULdG_iusKhW_5NZTHWd3hulXHFOtdTgnOzQQ&push=%D0%94%D0%B5%D0%BD%D1%8C%20%D0%92%D0%B5%D0%BB%D0%B8%D0%BA%D0%BE%D0%B9%20%D0%9E%D0%BA%D1%82%D1%8F%D0%B1%D1%80%D1%8C%D1%81%D0%BA%D0%BE%D0%B9%20%D1%81%D0%BE%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D1%81%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9%20%D1%80%D0%B5%D0%B2%D0%BE%D0%BB%D1%8E%D1%86%D0%B8%D0%B8&news=16");
	curl_setopt($ch2, CURLOPT_HEADER, 0);

//добавляем два дескриптора
	curl_multi_add_handle($mh,$ch1);
	curl_multi_add_handle($mh,$ch2);

	$active = null;
//запускаем дескрипторы
	do {
		$mrc = curl_multi_exec($mh, $active);
	} while ($mrc == CURLM_CALL_MULTI_PERFORM);

	while ($active && $mrc == CURLM_OK) {
		if (curl_multi_select($mh) != -1) {
			do {
				$mrc = curl_multi_exec($mh, $active);
			} while ($mrc == CURLM_CALL_MULTI_PERFORM);
		}
	}
*/
	
} else {
	echo 'Error with checkPushDay';
}
?>