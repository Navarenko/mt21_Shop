<?php 
define("LESHA", "APA91bH7SDsDjJyleWv6IH-ZVQyKXwGrWbY9rJXcbi0FOL22ZfaIPCj0ruBhVQJkWS7zLKxtYN7VLo8crwBwVmnIb-iFq9YamwWfN8oKoYQfo-lWuzJa2fs");
define("MARY", "APA91bFtjpAX5602W2h16j9fdRSDl8id21goFmgyf24SVnmmdmhCY-UsVlH4iAmH3kPojen1Vk1kndMdst2ULdG_iusKhW_5NZTHWd3hulXHFOtdTgnOzQQ");
define("IVAN", "APA91bEKNdRBLzFWMLrNK3z0AJaJ74qULd4P12hzY6Q6to6OQrNEDB8zWuITU0mC01o0H02u_sLBJkpq66qkGStZ84La_liUZCM6BtgsNueuhqC6H4cB81E");
define("IVAN2", "APA91bFZrN25zZAky2wHaZG02EBv3tKX7ve5XWj08KccKlHbVIften4KPtJwXGYgKIYvvUs8DO-1atAsUf_Ud8psS8WxgDRwkam4c004w_nEbX7POe_f94");
define("NIKITA", "62dd78d5 678b5b7c daa88d77 8457425e 670de85d 89ad9285 5b4920e5 e4aaf058");
define("NAMIR", "APA91bFYYiI2b4iV9axlCYNFY7fKGXt0fhw0DRLvFuaWggF8PiTYB1u4vMgqFKnAT2e5j0rxlmJ-9b6ZobiXMnCskoVvDxLNfasOs_34k8NRSUac_QYXzK8");

$alltokens = "APA91bH5RRAIYPJOjpDx4s1rSRx09iRmmlUxFZesYNHEBCafgbzobZelHceXhZtkK2Av6kzZNsaBp8E4ZGu8iFKJp17Kbwf9MHTo-mwCQSI5jw9TFiOI50w,APA91bH7SDsDjJyleWv6IH-ZVQyKXwGrWbY9rJXcbi0FOL22ZfaIPCj0ruBhVQJkWS7zLKxtYN7VLo8crwBwVmnIb-iFq9YamwWfN8oKoYQfo-lWuzJa2fs,APA91bH9oc-dQBmdZKkIpZHXax5TysNg0Eo9_31lIyTkbtJhSO0YiroS1pQvFBtXx55enjTfHV234YHu6GUVKgNK-1hjHv08VpbVBiqy0Dw7usDzCeGka4A,APA91bHaZkRPIfv4KHl1QS6NeXpRV2gAIzKV4ojkOAVe52sxLTRfSIJwyxYF7yvPhS-n0laXrxSpObu5JsrPGK-_lDwZSMJMxUdimBqnDbA-h0AI-MSq02I,APA91bHb1-sbC-7SGxRNbzQX4RfNXczWxsgB4GSGryCi4bsGKwkjMNf5zYrPOjV8dyaK32hcjocWvthwylkqTfvzxYWCB4gkrJNKC--pi2nURcqk31ZXQGo,APA91bHB4LQUaTvFIMXEqjY5fGmnmD2AtguSva0CsKmuCH873VXlcdXyp25hy_Z4kOa7rfktLSp9SR73yuynzfAEKtp25mzuNF45wEMIJcr-orxxrf8Jkk0,APA91bHBuqMmwN1IbZmH59irPYZ4FcpH92N6KqJcQ8dGvHe_w3EKM-JQTE392me6bkG1jiwvKDahInh_TgFYLR-9mAD3PGleqlTWnpcM5HInPhlqOlshWg8,APA91bHBw28WSl-yoQ1X5J36I9_5XX-dgFZU6BbYjTVKJD3QTiPNWGMpfGGwqwo2kZNtSJDHTZqL5HJSrz3FbVqC4SuSmo7Zij0z81s4btMw4NcsMh8IIbM,APA91bHCIMZlu8QivXBKHdYANecVrm5NGd854UZlqq7lxP-5moykMRg7toAvXAui-BOC_edjiYH3AQaxxy3q2oV9j_eHm-2sYBxDJ1gwlogxopCb-feuQmg,APA91bHdZMHkcI_qF3W6fNq4FBQwb1Trhg4UMGbnRhLXuHB5ah_SaZYZ8Yn7EIuXv9jzmNDlIGJQlHM-JVCAhE1F_YZ2zDfMgDz3skTl-_MsKNzy_mzPDO0,APA91bHEFDAxgX9olNw49so1UUSlkJn5ITMQ5o-3BORiq3B7wlE18IUyyiEFr7ZrjDpvoZJAO5bDGgJXQ35AS5o4YHS-aq0Mv5D1eTU8rq35J8MXvvt7EpQ,APA91bHegfXvjCjdYagdG8NCEibYzX11L6kclWcIbSMl4KgU-2rfWFrNIk1G0OnMpE7lT4bCC8bsdngUuq2HGNqTC-TE_CkFKLYN3sM4gnUJQJCy9SMkPyI,APA91bHEttAB7_yE7tEPV8bcMvIUZSMwJTCENGWu35aWSoOiAEM_tvgd0hq-_lNJAdqYPAM8iW9fe_M0Vfuj6CICw_wwkJnKrZpeJbShB4itaMig7abIvjs,APA91bHFgnd1cImlu2YpksIUwnxr9ZEKHx31umu6cE55xikqJhjdj6HT8_-a5yc4lFtCJ2GIGKPRh3XE8XPKo2u-Moyt7qajxIi8_3xzVlOiHGmNzpWQjT0,APA91bHg9xZJruqCElAqCIJrIt4GnHee46TW8DMxEsj5-ZbIP-X7eiXYRmuuXWzXgpYhaxY34ZHzSo7GBAqsdaWn9nB3xSv-sUVpqFYlj_YoFDH8zOFQhSc,APA91bHhe5dzfGaJ_s7oJrfFlAVca0VkVgsdZWvQK_VYraYy64-_7YygKOJUhEpJCvzcq2pzyKyciiKYMPNCSrf_btYqFC7jUIt2EyTEayHKRNAtTRMu8d8,APA91bHheHpIKyuET3njEoNLB1WzHHmOcc8U9H0GChdzABaeIc2J7V4nq5NAT0LqsnLj54Hiw4x4mIjLNW0s06SpH-JMzwPt3YKdX_sStDE8G03HwvUUyZ4,APA91bHhEs8triOAsli2jcKtoPSI3wEMi0aP6IrBGMXzMxd5fU3Zrt2fmDbgDBvESI8YHbd1mSdbBNXtEuv1s4UWAqOCeuPYxdhx5sVG2GS6ERUMWu0XOdQ,APA91bHhPSgFHw0GaKcFohDldySGRlOXeaDHsrLlLD6RAKn2Fkoa8O-nhW1aXoztncZvXqhgI32TVOxBiTcLkXP9nMZq8TKUbmycPKNvj4GFjQXgJjwJKp8,APA91bHhY34gURJ6ljGojsaBlilAoYAggvWPyAo-Gg2HYSl2-_WpBFzIGYNlCE9EQpvBVrtk6RBSPxTxXjhaLrdvwi1ElVL1U3rByZXzQrX-JKsJN7TMQlA,APA91bHIfrTZqq-ywb9eeqneM_zlW9Z8NldtGdLDfi4Ju_0FJojuD5RHCpnhnP1rhZEEA-z8iKlwVhuN2BGV9APjr68L4pajEEzJQTmfJHq-ZQuwriWyCWE,APA91bHiWBk0sS6rvyiBW4A-WPqCq-yL4wBKVAhtqdMTdKuL2rNN4VBMvOK28q16Mugbv3HtyeGu3GsrWTpMsVBeTdfJIb6RejnGMh_L7RYKYHYS_UCFKpI,APA91bHj36sYjhGVMBXnRZ3M6Toq9PvTqGUjho7l7Nj7Mp32Ii9na0oDfS8GKEt6KpBzgYTGA2HKjAucdNa2vioeIF5fmn0mUGs4boLV__V1-4LA7sAJdu0,APA91bHj6M5vnnc01_oJtdlYx5IhWgLq-9RlKo--aROESbw09G9lbf3oyn3czuDHJRGq34q78Pr0tNxD21c5bmZr8SHulALs8DLSkCzmUkt-R8tfIANI8nw,APA91bHJic2dZrJmOTHEvZ3KrUY4e5iD9R8kr4y8HB3KSW7PKKijv8JfJYKBpH0lj1QvG_Pmw_dGVcPqzI7AxZp8uElqxiM3dmWalkyN60O1uS4bOQ27YLo,APA91bHlFe95I5irCmWbF29Xg_7YB-a3BZvDa_BsQ6SemHSjqslUo3Mwh2sJkY2GE5PpbbTApI3PSNyVGuHKTb4dN4lkbRY12aOAd1zG2Q-p2IBQ-xEqIvY,APA91bHm47D3q3ArIGXw1EjlUY47rJDEQzuS2E6SKl4wamrqMlymaD6ITH3ERpzs2-AaDxWsJthN7foGLr9vIqlnfE6hfqtp7fwE9_g-8AmwP18jGXQF0xI,APA91bHMbJNgWKGDnk9aeuyXUgDDgx1EgnxRh77BrkhJfW8NkM2FPNjL7oamIGPc8v9Lh89bonFiogyWUI6Cwc55kLckdn-7qyWT2ZkCXsx2eaAFZ276F6s,APA91bHMGkL3aURhJ9_zN4Cjahl-OoXB3djGjMAlDuBAca24T6fER1c92gZ1D42mn3FEyiy8QUZgfECNaaqF9FfAMogPyHNpuRYgX8KuYhHu4QLH7u2Q-kk,APA91bHmjp94amOG_EOEbLbTXuNubUtWCV1AGVAC-uEuKnxjNdNpByoichk4u18lgQWVJ4oIvkWqMrUhbkDbcWIdvoxnDckZ65qaqzLCHpfMkz5v6c3NVhs,APA91bHmvr0GafNsARs6jX2hN5iUqYjqsL9JV5hjl1SzaTWUHFZxa0eGX6_0hJn9CuPuE0HX-jGmO7CJ4YL_CrEPiaOPEK_2-sxb4STuizfhe0_ZVA93Mzo,APA91bHNDewga335F9_QNwvDJEnxH6_WqX9dBVBXSBpn1yr3euxCVee2IYYSvovbEEBfXPSDp2k6ilPj1pf2oMW8Ee0Kj0NjHbYYUzHyo5_a_S4vqvBxBJQ,APA91bHndpNkOWj1QCz8yVPIWx6vnYUtpM70mXnqM371dwjJXTfJn_kEhHqpiWq0gQnV0Efap6UVgYs49ihoa54VorlwRLic8d8_jDKIpTwwTUFo4Q8IeF8,APA91bHngb3z3aUmkYAUQp2QeYTEI0tVkfGZrURnp3B1GZ-4Zha64ZfmL-OD3IL-jmnxdt0epSGJo7bqH3Kw0yH1mp6uzLHQD13FlOrrYMMpouCfxwGkBSs,APA91bHNvqxvaZ1mr-ZyX8UCZogmiqJJ69i2aSeRZzz3V4BnlU9opcVZmJPYQbRnGUDHBiAipuekoGQAaWKuNDmEX2enRZNVGzWZI-5a6hK69IzWnAxVrqQ,APA91bHNxHJdIInkYX2RpnRBk3KzkX8zEkSS0iQ5mARGOuThVOZhnyaa2PpIRn8_cF3gC6U_EMfOGe-krmTsBNVA_J5STQctjkKUuUfbV7moVxO3R3h4hAQ,APA91bHoJMTzLsJ65YkfLi9HhT7o1zhq4NO7R_eyl5hbCoxyo6isZmMVghmgi5pISnwMElNqksk5-B2YFPe9YIT4Dr8T6HuXoRbndNTypN8e2libx0M1i58,APA91bHOR1-Q2RT4CLwIoOHhPBzs3DR3xMUeBrsSBksYutMtEuLsC7OzqLdsnYW9zI9KgdPri79OfBhXCsdv0ytbMEK-E1f7j2DwSeikJQwBZAWShz-83es,APA91bHPatCwbL0BimEHg04Ost7lSYeddeE-MjrB1vMNI4CrXrpGaOvMBRCLW3oWX1dNM8wLI2soj4gNEb9NMy69IG0QgHQEk5jYl2QqBBwnVOwABHEFXJw,APA91bHPRNQOsQDwphiLho3IZACGi-AL3mSG8_pwwJ3_oF5Ojc2un6_p8mPBXqBsEjakeskNaJqCcrOhU7Dne9uJ9v-ffUhfk9i38EOV1maOufiIF7ZCjAM,APA91bHpTFTWaGyISpgCQQrOZEE79bIPBNWGDpTlMoAH2-V1vzzs564r0kCx2z3uB3vbYmTwSorjpUYiJ93mZeVgGzpWGF2g1UbpNZ2FipMV66xtlNPIo4E,APA91bHPYGpIm0YmrGQ8ftvZKSM2JZzKd8dl4P8xEaN7M9JAdnwA1YLh5ouSIu2ctzvpPBp53516nStp7bmjujj-4NnVl68pPPMjK1QkDbyr8bEZShMbhkk,APA91bHQralYjQ1gnpASpIvNsy2UKxvzPw_pepiHptuxJc_hCHRC6SENllB1Qq_XuuMRYhwhDtHssMx9kbpIKAg2WWC7yQ8vw2E93sENbETMF5TzMz1sq7s,APA91bHS2lFks2_PjtqbwQrCv438jSvk-02kqIWXnJsZlajinXpWuAwNWpN4bkcQLjeQF7XVSL_JnjjJ_dPE_hgEXx8l5nuNHR77OAxPaWcltduvusxRJG0,APA91bHsDJi6_M67-p7qnqO1ClHV3-kNSUClM0BS2qlS122NHN0hsng4tcxJDBz3y51Bs7V-9JKL8Lt8IipULFS9uHDZC6y9jqq8jHGnPNgayCWKXbTTrOc,APA91bHSXrLHBXjO8qwGkDJnPWGkSONsOwD3RirsiFpkvT_fYSoJnrSZac04H__qUF1S9Ffwn8pXpx3LaHZRCV5GrcHndpTr1RGWXIzXL3r6O4rBrP8Z1rk,APA91bHtKGdcHwY2ke0pMHwh2mQwDgG5wE2phGrJthNQ0_nsUUNqRoFUJm9hIWSA-sDlwtAbKKPEPKMx1m0ponLqOhJka_zIgnH1gbnyVVBfB-NN2ANoubY,APA91bHTyqnkYW8JrjWO6DGSt1Mv6x--kzBKjoH3igy0AQg5fsH98RGwjGt-OHEuADHlp3V3dUploIjIMyIGDtK9F59k9OiwS2fnWqz6b23cl9z7G3xmPmk,APA91bHu9Wkk2XE5LhkPNxUF1CruaUH6ffJj4-f_CreJ-hvZmH8_mApBjBWo5Y7THb1D-N6dL2XaU1mDjpk3JqwkVdA77ghEY1DZhPXUiLF--Hn8K8Etbd4,APA91bHVHqsrZvputTrX0noOOUv7gVPPGn9Hz0c8kNypgJKnRPbDdsC0DmvwmLR97a-r5aBw4VdkXt_groU_03oUHt0coYVXq7mVRfRSWZVTB7iS8e70sJA,APA91bHvxtYJV1tNHA6LJwGj0sJ9DBu1O6ZyNchWX0Fp8bVozJSIuYYVEdf7lAXVMXayexOHaF7mnxngIQL0o0klRqo-ss2obrgAmVdEftcu5dVQ9NU3dN0,APA91bHx8jWDAgj_RjqgFzWN1Q41MxmYfTQktC1mvnDiStpvVjM7g7z3s6xhPbAD5nftqXHAGblPqSOmzBUmW5oki07jWPZTpfje14QdYcAw5Kwo8RJ2mFQ,APA91bHXbSkUSbAOheKKCmvPwVE8SSBm5CdUxHu-9gseIYpcZl9pIt8MpjsO2gGSqv_mma3rMFBI5vqaz-nNwtZo4teRg1o8OLdFkRo8Jc99Z-msW3BsnBQ,APA91bHxDvyZoiIppR8aLOdwSVwByvbfsUpZPvzjZwCvF2ZN6VTxQHZUcr4RQU7DrA5Zrg2abb8pVHJg4sxUz0sdymx_xNlXoCzzwvtxzfdYWVUFJzRQACw,APA91bHXiPi___3BrwGjk32Nz8vZjw3yFmqBX6KLL7VIX0tIix7NmEcbyjnuY0qivQtZzlJ4Qx1dTlKhrYE7ehTXCRWA-_cVOOkf5ye7fNOF1FcdFuLKPjA,APA91bHXSkIxxtMCM3N_q8uV0jBCYCY53WNGSBTWTqSzRfVRqHfyYuxdree9MvlgqDwCONnOqDxiP1weD7h6_erq_w_2hZ9JEkby7LOsKU0FyvT1tn54pwM,APA91bHxXMTrf_2Hy1S2KT3lOoJCKVXcgKnZMPDCPj4XLJzVeeOE2H0ZRMoztjmL0sVod2TKOMPEk3DQmoCO00rwHw1EzC7t-W259w4GG8zB8M9be2GMvVU,APA91bHzKV8cqw-M80EI2b8iAldpaITuo5dxq63isJxUXxX8-LrPOvAgBIy0EcR-TnW6jT6_lj-d1L8yRNyZUzKOJbw6qhMjCx6cyRJNF2iwmU3pFBMmHp8,APA91bHzTWVlAYxzvf2ddx3ULP5-SNBUBpdjY7U9cgXJ3rZCVlZ2JvTjFKNV5hPlphP1FJpkfF7qYzFytq-EKj1l8I5cE3LJHnraQtzmBieeVTIY70mliuM"; /* получатели через запятую. Например $tokens = LESHA.','.MARY; */

include 'push_data.php';
include 'checkPushDay.php';
$arrtokens = explode(",", $alltokens);
$countArrTokens = count($arrtokens);

if (checkPushDay($date, $weekday, $mounth, $year, $pending)) {
	$i = 0;
	$ch = array();
	$mh = curl_multi_init(); //создаем набор дескрипторов cURL
	while ($i < $countArrTokens) {
		$ch[$i] = curl_init(); // создаем ресурс cURL
		// устанавливаем URL и другие соответствующие опции
		curl_setopt($ch[$i], CURLOPT_URL, 'https://mt21.ru/shop/index.php?route=mshpo/ajax/push&ACTION=addPush&tokens='.$arrtokens[$i].'&push='.$push_text.'&'.$push_method.'='.$push_pageId);
		curl_setopt($ch[$i], CURLOPT_HEADER, 0);
		curl_multi_add_handle($mh,$ch[$i++]); //добавляем дескриптор
	}

	$active = null;
	//запускаем дескрипторы
	do {
		$mrc = curl_multi_exec($mh, $active);
	} while ($mrc == CURLM_CALL_MULTI_PERFORM);

	while ($active && $mrc == CURLM_OK) {
		if (curl_multi_select($mh) != -1) {
			do {
				$mrc = curl_multi_exec($mh, $active);
			} while ($mrc == CURLM_CALL_MULTI_PERFORM);
		}
	}

	$i = 0;
	while ($i < $countArrTokens) {
		//закрываем дескрипторы
		curl_multi_remove_handle($mh, $ch[$i++]);
	}
	curl_multi_close($mh);

/*  ОБРАЗЕЦ:

	// создаем оба ресурса cURL
	$ch1 = curl_init();
	$ch2 = curl_init();

// устанавливаем URL и другие соответствующие опции
	curl_setopt($ch1, CURLOPT_URL, "https://mt21.ru/shop/index.php?route=mshpo/ajax/push&ACTION=addPush&tokens=APA91bH7SDsDjJyleWv6IH-ZVQyKXwGrWbY9rJXcbi0FOL22ZfaIPCj0ruBhVQJkWS7zLKxtYN7VLo8crwBwVmnIb-iFq9YamwWfN8oKoYQfo-lWuzJa2fs&push=%D0%94%D0%B5%D0%BD%D1%8C%20%D0%92%D0%B5%D0%BB%D0%B8%D0%BA%D0%BE%D0%B9%20%D0%9E%D0%BA%D1%82%D1%8F%D0%B1%D1%80%D1%8C%D1%81%D0%BA%D0%BE%D0%B9%20%D1%81%D0%BE%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D1%81%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9%20%D1%80%D0%B5%D0%B2%D0%BE%D0%BB%D1%8E%D1%86%D0%B8%D0%B8&news=16");
	curl_setopt($ch1, CURLOPT_HEADER, 0);
	curl_setopt($ch2, CURLOPT_URL, "https://mt21.ru/shop/index.php?route=mshpo/ajax/push&ACTION=addPush&tokens=APA91bFtjpAX5602W2h16j9fdRSDl8id21goFmgyf24SVnmmdmhCY-UsVlH4iAmH3kPojen1Vk1kndMdst2ULdG_iusKhW_5NZTHWd3hulXHFOtdTgnOzQQ&push=%D0%94%D0%B5%D0%BD%D1%8C%20%D0%92%D0%B5%D0%BB%D0%B8%D0%BA%D0%BE%D0%B9%20%D0%9E%D0%BA%D1%82%D1%8F%D0%B1%D1%80%D1%8C%D1%81%D0%BA%D0%BE%D0%B9%20%D1%81%D0%BE%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D1%81%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9%20%D1%80%D0%B5%D0%B2%D0%BE%D0%BB%D1%8E%D1%86%D0%B8%D0%B8&news=16");
	curl_setopt($ch2, CURLOPT_HEADER, 0);

//добавляем два дескриптора
	curl_multi_add_handle($mh,$ch1);
	curl_multi_add_handle($mh,$ch2);

	$active = null;
//запускаем дескрипторы
	do {
		$mrc = curl_multi_exec($mh, $active);
	} while ($mrc == CURLM_CALL_MULTI_PERFORM);

	while ($active && $mrc == CURLM_OK) {
		if (curl_multi_select($mh) != -1) {
			do {
				$mrc = curl_multi_exec($mh, $active);
			} while ($mrc == CURLM_CALL_MULTI_PERFORM);
		}
	}
*/
	
} else {
	echo 'Error with checkPushDay';
}
?>